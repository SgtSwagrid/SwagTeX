% Package definition

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{SwagTeX-graphs}

% External dependencies

\RequirePackage {
    amsfonts,
    bm,
    ifthen,
}

% Internal dependencies

\RequirePackage {
    SwagTeX/modules/collections,
    SwagTeX/modules/colours,
    SwagTeX/modules/domains,
    SwagTeX/modules/functions,
    SwagTeX/modules/operators,
}

% Colours

\newcommand {\graph} [1] { \col{graph}{#1} }
\newcommand {\vertex} [1] { \col{vertex}{#1} }
\newcommand {\edge} [1] { \col{edge}{#1} }
\newcommand {\mixed} [1] { \col{mixed}{#1} }
\newcommand {\graphop} [1] { \col{graphop}{#1} }

% Graphs

\newcommand {\G} [1] [] { \graph{\mathrm{G}_{#1}} } % Graph.
\newcommand {\Gp} [1] [] { \graph{\mathrm{G}_{#1}'} }
\newcommand {\Gpp} [1] [] { \graph{\mathrm{G}_{#1}''} }
\newcommand {\Gh} [1] [] { \graph{\hat{\mathrm{G}}_{#1}} }
\newcommand {\Ghp} [1] [] { \graph{\hat{\mathrm{G}}_{#1}'} }
\newcommand {\Ghpp} [1] [] { \graph{\hat{\mathrm{G}}_{#1}''} }

% Graphs - duals

\newcommand {\Gd} [1] [] { \graph{\G_{#1}^{\graph{*}}} } % Graph dual.
\newcommand {\Gdd} [1] [] { \graph{\G_{#1}^{\graph{**}}} } % Graph double dual.
\newcommand {\Gdh} [1] [] { \graph{\hat{G}_{#1}^{\graph{*}}} }

% Graphs - definitions

\newcommand {\GVE} [1] [] { \G[#1] = \VE[#1] } % Graph with definition
\newcommand {\GdEV} [1] [] { \Gd[#1] = \EV[#1] } % Graph dual with definition.
\newcommand {\GUVI} [1] [] { \G[#1] = (\U[#1] \dotcup \V[#1], \I[#1]) } % Bipartite graph with definition.

% Hypergraphs

\renewcommand {\H} [1] [] { \graph{\mathrm{H}_{#1}} } % Hypergraph.
\newcommand {\Hp} [1] [] { \graph{\mathrm{H}_{#1}'} }
\newcommand {\Hpp} [1] [] { \graph{\mathrm{H}_{#1}''} }
\newcommand {\Hh} [1] [] { \graph{\hat{\mathrm{H}}_{#1}} }
\newcommand {\Hhp} [1] [] { \graph{\hat{\mathrm{H}}_{#1}'} }
\newcommand {\Hhpp} [1] [] { \graph{\hat{\mathrm{H}}_{#1}''} }

% Hypergraphs - duals

\newcommand {\Hd} [1] [] { \graph{\mathrm{H}_{#1}^{\graph{*}}} } % Hypergraph dual.
\newcommand {\Hdd} [1] [] { \graph{\mathrm{H}_{#1}^{\graph{**}}} } % Hypergraph double dual.
\newcommand {\Hdh} [1] [] { \graph{\hat{\mathrm{H}}_{#1}^{\graph{*}}} }

\newcommand {\Hddef} [1] [] { \Hd[#1] \df (\E[#1], \V[#1])_{\Eb} }

% Hypergraphs - definitions

\newcommand {\HVE} [1] [] { \H[#1] = \VE[#1] } % Hypergraph with definition.
\newcommand {\HdEV} [1] [] { \Hd[#1] = \EV[#1] } % Hypergraph dual with definition.

% Vertices - vertex sets

\newcommand {\Vrm} { \mathrm{V} } % V in upright font.
\newcommand {\Vrmh} { \hat{\Vrm} }

\newcommand {\V} [1] [] { \vertex{\Vrm_{#1}} } % Vertex set.
\newcommand {\Vp} [1] [] { \vertex{\Vrm_{#1}'} } % Vertex subset.
\newcommand {\Vpp} [1] [] { \vertex{\Vrm_{#1}''} } % Vertex subset.
\newcommand {\Vh} [1] [] { \vertex{\Vrmh_{#1}} } % Vertex cutset.
\newcommand {\Vhp} [1] [] { \vertex{\Vrmh_{#1}'} } % Vertex cutset.
\newcommand {\Vhpp} [1] [] { \vertex{\Vrmh_{#1}''} } % Vertex cutset.

\newcommand {\Vc} [1] [] { \vertex{\Vrm_{#1}^{\compl}} } % Vertex set complement.
\newcommand {\Vhc} [1] [] { \vertex{\Vrmh_{#1}^{\compl}} } % Vertex cutset complement.

% Vertices - subset definitions

\newcommand {\Vpdef} [1] [] { \Vp[#1] \subseteq \V }
\newcommand {\Vppdef} [1] [] { \Vpp[#1] \subseteq \V }
\newcommand {\Vhdef} [1] [] { \Vh[#1] \subseteq \V }
\newcommand {\Vhpdef} [1] [] { \Vhp[#1] \subseteq \V }
\newcommand {\Vhppdef} [1] [] { \Vhpp[#1] \subseteq \V }
\newcommand {\Vhcdef} [1] [] { \Vhc[#1] \df \V \setminus \Vh[#1] }

% Vertices - partitions

\newcommand {\Vs} [2] [1] { \setbtwsub[#1]{#2}{\V} }
\newcommand {\Vps} [2] [1] { \setbtwsub[#1]{#2}{\Vp} }
\newcommand {\Vpps} [2] [1] { \setbtwsub[#1]{#2}{\Vpp} }
\newcommand {\Vhs} [2] [1] { \setbtwsub[#1]{#2}{\Vh} }
\newcommand {\Vhps} [2] [1] { \setbtwsub[#1]{#2}{\Vhp} }
\newcommand {\Vhpps} [2] [1] { \setbtwsub[#1]{#2}{\Vhpp} }

% Vertices - individual

\renewcommand {\u} [1] [] { \vertex{u_{#1}} } % Vertex.
\newcommand {\up} [1] [] { \vertex{u_{#1}'} }
\newcommand {\upp} [1] [] { \vertex{u_{#1}''} }

\renewcommand {\v} [1] [] { \vertex{v_{#1}} } % Vertex.
\newcommand {\vp} [1] [] { \vertex{v_{#1}'} }
\newcommand {\vpp} [1] [] { \vertex{v_{#1}''} }

% Vertices - collections

\newcommand {\us} [2] [1] { \setbtwsub[#1]{#2}{\u} }
\newcommand {\ups} [2] [1] { \setbtwsub[#1]{#2}{\up} }
\newcommand {\upps} [2] [1] { \setbtwsub[#1]{#2}{\upp} }

\newcommand {\vs} [2] [1] { \setbtwsub[#1]{#2}{\v} }
\newcommand {\vps} [2] [1] { \setbtwsub[#1]{#2}{\vp} }
\newcommand {\vpps} [2] [1] { \setbtwsub[#1]{#2}{\vpp} }

\newcommand {\uv} [1] [] { \u[#1], \v[#1] } % Pair of u and v together.

% Edges - edge sets

\newcommand {\Erm} { \mathrm{E} } % E in upright font.
\newcommand {\Ermh} { \hat{\Erm} }

\newcommand {\E} [1] [] { \edge{\Erm_{#1}} } % Edge set.
\newcommand {\Ep} [1] [] { \edge{\Erm_{#1}'} } % Edge subset.
\newcommand {\Epp} [1] [] { \edge{\Erm_{#1}''} } % Edge subset.
\newcommand {\Eh} [1] [] { \edge{\Ermh_{#1}} } % Edge cutset.
\newcommand {\Ehp} [1] [] { \edge{\Ermh_{#1}'} } % Edge cutset.
\newcommand {\Ehpp} [1] [] { \edge{\Ermh_{#1}''} } % Edge cutset.

\newcommand {\Ec} [1] [] { \edge{\Erm_{#1}^{\compl}} } % Edge set complement.
\newcommand {\Ehc} [1] [] { \edge{\Ermh_{#1}^{\compl}} } % Edge cutset complement.

% Edges - subset definitions

\newcommand {\Epdef} [1] [] { \Ep[#1] \subseteq \E }
\newcommand {\Eppdef} [1] [] { \Epp[#1] \subseteq \E }
\newcommand {\Ehdef} [1] [] { \Eh[#1] \subseteq \E }
\newcommand {\Ehpdef} [1] [] { \Ehp[#1] \subseteq \E }
\newcommand {\Ehppdef} [1] [] { \Ehpp[#1] \subseteq \E }
\newcommand {\Ehcdef} [1] [] { \Ehc[#1] \df \E \wo \Eh[#1] }

% Edges - partitions

\newcommand {\Es} [2] [1] { \setbtwsub[#1]{#2}{\E} }
\newcommand {\Eps} [2] [1] { \setbtwsub[#1]{#2}{\Ep} }
\newcommand {\Epps} [2] [1] { \setbtwsub[#1]{#2}{\Epp} }
\newcommand {\Ehs} [2] [1] { \setbtwsub[#1]{#2}{\Eh} }
\newcommand {\Ehps} [2] [1] { \setbtwsub[#1]{#2}{\Ehp} }
\newcommand {\Ehpps} [2] [1] { \setbtwsub[#1]{#2}{\Ehpp} }

% Edges - individual

\newcommand {\e} [1] [] { \edge{e_{#1}} } % Edge.
\newcommand {\ep} [1] [] { \edge{e_{#1}'} }
\newcommand {\epp} [1] [] { \edge{e_{#1}''} }

% Incidences - collections

\newcommand {\Irm} { \mathrm{I} } % I in upright font.

\newcommand {\I} [1] [] { \graph{\Irm_{#1}} } % Incidence set.
\newcommand {\Ip} [1] [] { \graph{\Irm_{#1}} } % Incidence subset.
\newcommand {\Ipp} [1] [] { \graph{\Irm_{#1}} } % Incidence subset.
\newcommand {\Id} [1] [] { \graph{\Irm_{#1}^{*}} } % Incidence set dual.

% Incidences - definitions

\newcommand {\Idef} [1] [] { \I[#1] \df \setwhere{\ve \in \VtimesE[#1]}{\v \in \e} }
\newcommand {\Iddef} [1] [] { \Id[#1] \df \setwhere{\ev \in \EtimesV[#1]}{\e \in \v} }
\newcommand {\Itype} [1] [] { \I[#1] \subseteq \VtimesE[#1] }
\newcommand {\Idtype} [1] [] { \Id[#1] \subseteq \EtimesV[#1] }

% Incidences - shortcuts

\newcommand {\VE} [1] [] { (\V[#1], \E[#1]) }
\newcommand {\EV} [1] [] { (\E[#1], \V[#1]) }
\newcommand {\VtimesE} [1] [] { \V[#1] \times \E[#1] }
\newcommand {\EtimesV} [1] [] { \E[#1] \times \V[#1] }
\newcommand {\ve} [1] [] { (\v[#1], \e[#1]) }
\newcommand {\ev} [1] [] { (\e[#1], \v[#1]) }

% Incidences - partitions

\newcommand {\Is} [2] [1] { \setbtwsub[#1]{#2}{\I} }
\newcommand {\Ips} [2] [1] { \setbtwsub[#1]{#2}{\Ip} }
\newcommand {\Ipps} [2] [1] { \setbtwsub[#1]{#2}{\Ipp} }

% Mixed elements - collections

\newcommand {\Xrm} { \mathrm{X} } % X in upright font.
\newcommand {\Xrmh} { \hat{\Xrm} }

\newcommand {\X} [1] [] { \mixed{\Xrm_{#1}} } % Mixed element set.
\newcommand {\Xp} [1] [] { \mixed{\Xrm_{#1}'} } % Mixed element subset.
\newcommand {\Xpp} [1] [] { \mixed{\Xrm_{#1}''} } % Mixed element subset.
\newcommand {\Xh} [1] [] { \mixed{\Xrmh_{#1}} } % Mixed element cutset.
\newcommand {\Xhc} [1] [] { \mixed{\Xrmh_{#1}^{\compl}} } % Complemenmt of mixed element cutset.

% Mixed elements - definitions

\newcommand {\Xdef} [1] [] { \X[#1] \df \VcupE[#1] }
\newcommand {\Xpdef} [1] [] { \Xp[#1] \df \Vp[#1] \dotcup \Ep[#1] }
\newcommand {\Xppdef} [1] [] { \Xpp[#1] \df \Vpp[#1] \dotcup \Epp[#1] }

% Mixed elements - shortcuts

\newcommand {\VcupE} [1] [] { \V[#1] \dotcup \E[#1] }
\newcommand {\EcupV} [1] [] { \E[#1] \dotcup \V[#1] }

% Mixed elements - partitions

\newcommand {\Xs} [2] [1] { \setbtwsub[#1]{#2}{\X} }
\newcommand {\Xps} [2] [1] { \setbtwsub[#1]{#2}{\Xp} }
\newcommand {\Xpps} [2] [1] { \setbtwsub[#1]{#2}{\Xpp} }
\newcommand {\VEs} [2] [1] { \setbtwsub[#1]{#2}{\VcupE} }
\newcommand {\EVs} [2] [1] {\setbtwsub[#1]{#2}{\EcupV} }

% Mixed elements - individual

\newcommand {\x} [1] [] { \mixed{x_{#1}} } % A single vertex or edge.
\newcommand {\y} [1] [] { \mixed{y_{#1}} } % A single vertex or edge.

% Adjacency and neighbourhoods

\newcommand {\adj} [3] [] { #2 \sim_{#1} #3 } % Adjacency predicate.

\newcommand {\NV} [1] [] { \vertex{N_{#1}} } % Vertex neighbourhood.
\newcommand {\NE} [1] [] { \edge{N_{#1}} } % Edge neighbourhood.
\newcommand {\NVof} [2] [] { \NV\of[#1]{#2} }
\newcommand {\NEof} [2] [] { \NE\of[#1]{#2} }
\newcommand {\NVi} [2] [] { \NV[#1]\of[i]{#2} } % Inclusive vertex neighbourhood.
\newcommand {\NVx} [2] [] { \NV[#1]\of[x]{#2} } % Exclusive vertex neighbourhood.
\newcommand {\NEi} [2] [] { \NE[#1]\of[i]{#2} } % Inclusive edge neighbourhood.
\newcommand {\NEx} [2] [] { \NE[#1]\of[x]{#2} } % Exclusive edge neighbourhood.

% Weights

\newcommand {\Vw} [1] [] { \vertex{\omega_{#1}} } % Vertex weights.
\newcommand {\Ew} [1] [] { \edge{\omega_{#1}} } % Edge weights.
\newcommand {\Iw} [1] [] { \graph{\omega_{#1}} } % Incidence weights.
\newcommand {\Xw} [1] [] { \mixed{\omega_{#1}} } % Mixed weights.

\newcommand {\Vwp} [1] [] { \vertex{\omega_{#1}'} } % Alternative vertex weights.
\newcommand {\Ewp} [1] [] { \edge{\omega_{#1}'} } % Alternative edge weights.
\newcommand {\Iwp} [1] [] { \graph{\omega_{#1}'} } % Alternative incidence weights.
\newcommand {\Xwp} [1] [] { \mixed{\omega_{#1}'} } % Alternative mixed weights.

\newcommand {\Vwdef} [1] [] { \Vw[#1] : \V \to \Rpp } % Vertex weights with definition.
\newcommand {\Ewdef} [1] [] { \Ew[#1] : \E \to \Rpp } % Edge weights with definition.
\newcommand {\Iwdef} [1] [] { \Iw[#1] : \I \to \Rpp } % Incidence weights with definition.
\newcommand {\Xwdef} [1] [] { \Xw[#1] : \X \to \Rpp } % Mixed weights with definition.

% Induced sets

\newcommand {\of} [2] [] {
    \ifthenelse {\equal{#1}{e}} {\ofe{#2}} { % e = edge induced <>
    \ifthenelse {\equal{#1}{x}} {\ofx{#2}} { % x = strongly induced / exclusive ()
    \ifthenelse {\equal{#1}{i}} {\ofi{#2}} { % i = weakly induced / inclusive []
    \ifthenelse {\equal{#1}{n}} {\ofn{#2}} {
    \ofi{#2} % Default
    }}}}
}

\newcommand {\ofi} [2] [] { #1 [#2] } % Parameter of weakly induced subgraph.
\newcommand {\ofx} [2] [] { #1 (#2) } % Parameter of strongly induced subgraph.
\newcommand {\ofe} [2] [] { #1 \langle #2 \rangle } % Parameter of edge induced subgraph.
\newcommand {\ofn} [2] [] { #1 \{ #2 \} }

% Borders

\newcommand {\Vb} [1] [] { \vertex{\partial_{#1}} } % Boundary vertices of vertex cutset.
\newcommand {\Eb} [1] [] { \edge{\delta_{#1}} } % Crossing edges of vertex cutset.
\newcommand {\Edb} [1] [] { \edge{\partial_{#1}} } % Boundary dual vertices of dual vertex cutset.
\newcommand {\Vdb} [1] [] { \vertex{\delta_{#1}} } % Crossing dual edges of dual vertex cutset.
\newcommand {\Ib} [1] [] { \graph{\delta_{#1}} } % Crossing incidences of mixed (V, E) cutset.
\newcommand {\Xb} [1] [] { \mixed{\partial_{#1}} } % Mixed boundary (V, E) of mixed (V, E) cutset.

% Borders - definitions

\newcommand {\Vbdef} { \Vb(\Vh) \df \setwhere{\v \in \Vh}{\bigexists_{\u \in \Vhc} \adj{\u}{\v}} }
\newcommand {\Ebdef} { \Eb(\Vh) \df \setwhere{\e \in \E}{\e \cap \Vh \neq \varnothing \land \e \cap \Vhc \neq \varnothing} }
\newcommand {\Edbdef} { \Edb(\Eh) \df \setwhere{\e \in \Eh}{\e \cap \bigcup \Ehc \neq \varnothing} }
\newcommand {\Vdbdef} { \Vdb(\Eh) \df \setwhere{\v \in \V}{\Eh{[\v]} \neq \varnothing \land \Ehc{[\v]} \neq \varnothing} }
\newcommand {\Ibdef} { \Ib(\Xh) \df \setwhere{\ve \in \I}{\v \in \Xh \oplus \e \in \Xh} }
\newcommand {\Xbdef} { \Xb(\Xh) \df \setwhere{\x \in \Xh}{\bigexists_{\y \in \Xhc} \x \in \y \lor \y \in \x} }

% Cut costs

\newcommand {\Vcost} [1] [] { \vertex{\nu_{#1}} } % Vertex cost: 2^V -> R
\newcommand {\Ecost} [1] [] { \edge{\mu_{#1}} } % Edge cost: 2^V -> R
\newcommand {\Edcost} [1] [] { \edge{\nu_{#1}} } % Dual vertex cost: 2^E -> R
\newcommand {\Vdcost} [1] [] { \vertex{\mu_{#1}} } % Dual edge cost: 2^E -> R
\newcommand {\Icost} [1] [] { \graph{\mu_{#1}} } % Incidence cost: 2^(V × E) -> R
\newcommand {\Xcost} [1] [] { \mixed{\nu_{#1}} } % Mixed cost: 2^(V ∪ E) -> R

\newcommand {\Vpcost} [1] [] { \vertex{\nu_{#1}'} } % Alternative vertex cost
\newcommand {\Epcost} [1] [] { \edge{\mu_{#1}'} } % Alternative edge cost

\newcommand {\modularity} [1] [] { \function{Q_{#1}} }

% Cut costs - definitions

\newcommand {\Ecostdef} [1] [] { \Ecost[#1](\Vh) \df \Ew[#1](\Eb[#1](\Vh)) }
\newcommand {\Vdcostdef} [1] [] { \Vdcost[#1](\Eh) \df \Vw[#1](\Vdb[#1](\Eh)) }

% Graph size

\newcommand {\Vsize} [1] [] { \vertex{n_{#1}} } % Number of vertices.
\newcommand {\Edsize} [1] [] { \edge{n_{#1}} } % Number of dual vertices.
\newcommand {\Xsize} [1] [] { \mixed{n_{#1}} } % Number of vertex/edgex in incidence graph.
\newcommand {\Esize} [1] [] { \edge{m_{#1}} } % Number of edges.
\newcommand {\Vdsize} [1] [] { \vertex{m_{#1}} } % Number of dual edges.
\newcommand {\Isize} [1] [] { \graph{m_{#1}} } % Number of incidences in incidence graph.

% Degree and rank

\newcommand {\degmin} { \graphop{\delta} } % Min vertex degree in graph.
\newcommand {\degmax} { \graphop{\Delta} } % Max vertex degree in graph.
\newcommand {\degavg} { \graphop{\bar{d}} } % Average vertex degree in graph.

\newcommand {\rankmin} { \graphop{s} } % Min size of hyperedge in hypergraph.
\newcommand {\rank} { \graphop{r} } % Max size of hyperedge in hypergraph.
\newcommand {\rankavg} { \graphop{\bar{r}} } % Average size of hyperedge in hypergraph.

% Duality

\newcommand {\dual} [1] { {#1}^{\graph{*}} }
\newcommand {\dualdual} [1] { {#1}^{\graph{**}} }

\DeclareMathOperator {\LineGraph} { \graphop{L} } % Line graph of hypergraph.
\newcommand {\LineGraphdef} { \LineGraph(\G) \df \CliqueExp(\dual{\G}) }

% Expansions

\DeclareMathOperator {\CliqueExp} { \graphop{C} } % Clique expansion of hypegraph.
\DeclareMathOperator {\StarExp} { \graphop{S} } % Star expansion of hypergraph.

\newcommand {\CliqueExpdef} {
    \CliqueExp(\H) \df (\V, \setwhere{\ep}{\e \in \E \land \ep \subseteq \e \land \abs{\ep} = 2})
}

\newcommand {\StarExpdef} {
    \StarExp(\H) \df (\X, \I)
}

% Incidence graphs

\DeclareMathOperator {\IncGraph} { \graphop{B} } % Incidence graph of a graph.
\newcommand {\IncGraphdef} { \IncGraph\VE \df (\VcupE, \Inc) }

% Miscellaneous

\newcommand {\compl} {\mathsf{c}} % Set complement.